# Data Format Definition

This document describes the data formats used and generated by the `canbus_scenalializer` project.

## Output Data Format

The scenario classifier generates a JSON file named `classification_results.json` containing the classification results for a specific scene.

### File Structure

- **File Name:** `classification_results.json`
- **Format:** JSON

### Schema

| Field | Type | Description |
|---|---|---|
| `scene_token` | String | Unique identifier for the processed scene (NuScenes Token). |
| `scene_name` | String | Human-readable name of the scene (e.g., "scene-0061"). |
| `samples` | List | List of processed samples (frames) within the scene. |

#### Sample Object

Each item in the `samples` list represents a single timestamp/sample and contains:

| Field | Type | Description |
|---|---|---|
| `sample_token` | String | Unique identifier for the sample (NuScenes Token). |
| `timestamp` | Integer | Timestamp of the sample in microseconds. |
| `scenario` | String | Classified scenario label (e.g., "Cruising", "Stop", "Left Turn"). |
| `vehicle_state` | Object | Raw vehicle state data used for classification. |

#### Vehicle State Object

| Field | Type | Description |
|---|---|---|
| `speed` | Float | Vehicle speed in m/s. |
| `steering_angle` | Float | Steering angle in radians (positive = left). |
| `yaw_rate` | Float | Yaw rate in rad/s. |
| `turn_signal` | Integer | Turn signal state (0: None, 1: Left, 2: Right - *Note: Currently defaults to 0 if not available*). |

### Example JSON

```json
{
  "scene_token": "cc8c0bf57f984915a77078b10eb33198",
  "scene_name": "scene-0061",
  "samples": [
    {
      "sample_token": "ca9a282c9e77460f8360f564131a8af5",
      "timestamp": 1532402927647951,
      "scenario": "Cruising",
      "vehicle_state": {
        "speed": 8.988725931436823,
        "yaw_rate": 0.017157725989818573,
        "steering_angle": 0.04712388980384372,
        "turn_signal": 0
      }
    },
    {
      "sample_token": "39586f9d59004284a7114a68825e8eec",
      "timestamp": 1532402928147847,
      "scenario": "Cruising",
      "vehicle_state": {
        "speed": 8.750335534626444,
        "yaw_rate": 0.014740845188498497,
        "steering_angle": 0.054105206811822626,
        "turn_signal": 0
      }
    }
  ]
}
```
